# IELTS 口语题库系统功能说明

## 📋 功能清单

### 一、首页优化

✅ **标题居中显示**
- "IELTS Speaking Test Topics [1-4]" 标题居中
- 标题与"当季题库 1-4月"之间增加间距（mb-8）

✅ **全真模考入口**
- 显眼的"开始全真模考"按钮
- 渐变色设计，悬停动画效果
- 功能说明：随机抽题 · 实战计时 · 全程录音 · 智能评分

### 二、题目列表页（Part1/2/3）

✅ **掌握度管理系统**
- 新增"掌握度"列（表格最左侧）
- 三种状态：
  - 🔴 未开始：完全陌生
  - 🟡 磨合中：熟悉内容，但无法脱稿或限时完成
  - 🟢 已通关：能肌肉记忆式脱稿并卡时完成
- 点击切换状态，循环切换
- 数据存储在 LocalStorage，按 Part 分别存储
- 刷新页面不丢失数据

### 三、题目详情页（影子跟读训练）

✅ **逐句跟读优化**
- 句子上下排列更紧凑（space-y-3）
- 读到哪句自动高亮并上下平滑滚动
- 高亮句子有缩放效果（scale-[1.01]）

✅ **中英文对照**
- 每个英文句子下方显示对应中文翻译
- 智能拆分翻译，与英文句子一一对应

✅ **核心词高亮**
- 关键词自动加粗并显示紫色（text-purple-600）
- 使用 dangerouslySetInnerHTML 渲染高亮效果

✅ **播放控制**
- 底部固定控制条
- 功能：播放/暂停、上一句、下一句、倍速控制（0.5x-1.5x）
- 使用 Web Speech API 真实发音

✅ **录音功能**
- 支持录音并保存为 Blob
- 录音完成后可播放/暂停
- 显示录音时长
- 可删除并重新录制

✅ **默写模式**
- 点击"默写模式"按钮进入
- 根据关键词自动挖空
- 用户填写答案
- 提交后显示正误（✅绿色/❌红色）
- 计算正确率并给出评价
- 支持显示/隐藏答案
- 可重置重新开始

### 四、全真模考系统

✅ **随机抽题算法**
- Part 1：从题库随机抽取 3 个话题，每个话题随机抽取 2-3 道题
- Part 2：从题库随机抽取 1 个话题
- 每次生成的试卷不同

✅ **Part 1 考试流程**
- 每道题自动开始录音
- 显示 20 秒倒计时
- 倒计时结束播放提示音
- 自动停止录音并切换到下一题
- 支持点击播放题目发音

✅ **Part 2 考试流程**
- 准备阶段：1 分钟倒计时
- 录音阶段：2 分钟强制录音
- 倒计时低于 10 秒时数字变红并闪烁
- 时间结束播放提示音

✅ **全程录音**
- 使用 MediaRecorder API 录音
- 每个阶段分别录音并保存
- 所有录音保存在 audioBlobs 数组中

✅ **智能评分系统**
- 评分维度：
  - 流畅度（Fluency）
  - 准确度（Accuracy）
  - 发音（Pronunciation）
  - 总分（Overall）
- 分数范围：0-9 分（雅思标准）
- 显示总分和各维度得分
- 提供考试总结

✅ **提示音系统**
- 使用 Web Audio API 生成提示音
- 频率：800Hz
- 时长：200ms
- 在倒计时结束时播放

## 💾 数据存储

### LocalStorage 使用

1. **掌握度数据**
   - 键名：`mastery-levels-part1`, `mastery-levels-part2`, `mastery-levels-part3`
   - 格式：`{ "topicId": "not-started" | "practicing" | "mastered" }`

2. **收藏数据**
   - 键名：`favorites`
   - 格式：`["topicId-questionIndex-sentenceIndex", ...]`

## 🎨 UI/UX 特性

1. **响应式设计**：适配各种屏幕尺寸
2. **渐变色主题**：现代化视觉效果
3. **动画效果**：平滑过渡、悬停效果、缩放动画
4. **视觉反馈**：加载状态、录音指示、倒计时警告
5. **无障碍性**：清晰的按钮标签、合理的颜色对比度

## 🔧 技术栈

- **框架**：React + TypeScript
- **路由**：React Router v6
- **样式**：Tailwind CSS v4
- **图标**：Lucide React
- **语音**：Web Speech API
- **录音**：MediaRecorder API
- **音效**：Web Audio API

## 📱 页面路由

- `/` - 首页
- `/part/:partNumber` - 题目列表
- `/part/:partNumber/topic/:topicId` - 题目详情
- `/mock-exam` - 全真模考

## 🎯 下一步优化建议

1. 添加 Part 3 题目数据
2. 增强评分算法（语音识别 + AI 分析）
3. 添加学习进度统计
4. 支持导出录音文件
5. 添加历史考试记录
6. 支持自定义计时器时长
7. 添加错题本功能
